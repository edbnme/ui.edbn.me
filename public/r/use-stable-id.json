{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "use-stable-id",
  "type": "registry:hook",
  "title": "useStableId",
  "description": "SSR-safe hook for generating stable unique IDs for accessibility attributes.",
  "dependencies": [],
  "registryDependencies": [],
  "files": [
    {
      "path": "hooks/use-stable-id.ts",
      "content": "\"use client\";\r\n\r\nimport { useId, useMemo } from \"react\";\r\n\r\n// Global counter for SSR-safe IDs when useId is not available\r\nlet globalCounter = 0;\r\n\r\n/**\r\n * Generates a stable, SSR-safe ID that persists across renders.\r\n *\r\n * This hook ensures that IDs remain consistent between server and client\r\n * renders, preventing hydration mismatches. It uses React 18's useId\r\n * when available, with a fallback for older React versions.\r\n *\r\n * @param prefix - Optional prefix for the generated ID\r\n * @returns A stable, unique ID string\r\n *\r\n * @example\r\n * ```tsx\r\n * function MyComponent() {\r\n *   const id = useStableId('dialog');\r\n *\r\n *   return (\r\n *     <div aria-labelledby={`${id}-title`}>\r\n *       <h2 id={`${id}-title`}>Title</h2>\r\n *     </div>\r\n *   );\r\n * }\r\n * ```\r\n */\r\nexport function useStableId(prefix = \"id\"): string {\r\n  // Use React 18+'s useId for truly stable SSR-safe IDs\r\n  const reactId = useId();\r\n\r\n  // Memoize the ID construction - this is stable and render-safe\r\n  const stableId = useMemo(() => {\r\n    // React's useId returns values like \":r0:\" - clean it up\r\n    const cleanId = reactId.replace(/:/g, \"\");\r\n    return `${prefix}-${cleanId}`;\r\n  }, [reactId, prefix]);\r\n\r\n  return stableId;\r\n}\r\n\r\n/**\r\n * Generates a stable ID without React's useId hook.\r\n * Use this as a fallback or in non-component contexts.\r\n *\r\n * ⚠️ Warning: This may cause hydration mismatches if used during SSR.\r\n * Prefer useStableId in React components.\r\n *\r\n * @param prefix - Optional prefix for the generated ID\r\n * @returns A unique ID string\r\n *\r\n * @example\r\n * ```tsx\r\n * function MyComponent() {\r\n *   const idRef = useRef<string | null>(null);\r\n *\r\n *   if (!idRef.current) {\r\n *     idRef.current = generateId('button');\r\n *   }\r\n *\r\n *   return <button id={idRef.current}>Click me</button>;\r\n * }\r\n * ```\r\n */\r\nexport function generateId(prefix = \"id\"): string {\r\n  return `${prefix}-${++globalCounter}`;\r\n}\r\n\r\n/**\r\n * Hook that generates related IDs for a component and its parts.\r\n *\r\n * Useful for components with multiple elements that need related IDs\r\n * (e.g., dialog with title, description, content).\r\n *\r\n * @param prefix - Base prefix for all IDs\r\n * @returns An object with methods to generate related IDs\r\n *\r\n * @example\r\n * ```tsx\r\n * function Dialog() {\r\n *   const ids = useRelatedIds('dialog');\r\n *\r\n *   return (\r\n *     <div\r\n *       role=\"dialog\"\r\n *       aria-labelledby={ids.for('title')}\r\n *       aria-describedby={ids.for('description')}\r\n *     >\r\n *       <h2 id={ids.for('title')}>Title</h2>\r\n *       <p id={ids.for('description')}>Description</p>\r\n *     </div>\r\n *   );\r\n * }\r\n * ```\r\n */\r\nexport function useRelatedIds(prefix = \"component\"): {\r\n  base: string;\r\n  for: (part: string) => string;\r\n} {\r\n  const baseId = useStableId(prefix);\r\n\r\n  return {\r\n    base: baseId,\r\n    for: (part: string) => `${baseId}-${part}`,\r\n  };\r\n}\r\n\r\nexport default useStableId;\r\n",
      "type": "registry:hook"
    }
  ]
}