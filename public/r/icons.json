{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "icons",
  "type": "registry:lib",
  "title": "Animated Icons",
  "description": "Animated icon components including loading spinners, morphing icons, and close buttons.",
  "dependencies": [
    "motion",
    "@phosphor-icons/react",
    "tw-animate-css"
  ],
  "registryDependencies": [
    "utils"
  ],
  "files": [
    {
      "path": "lib/icons.tsx",
      "content": "\"use client\";\r\n\r\nimport * as React from \"react\";\r\nimport {\r\n  motion,\r\n  AnimatePresence,\r\n  type Variants,\r\n  type TargetAndTransition,\r\n  type VariantLabels,\r\n} from \"motion/react\";\r\nimport type { Icon } from \"@phosphor-icons/react\";\r\nimport { cn } from \"@/lib/utils\";\r\nimport { springPresets } from \"@/lib/motion\";\r\n\r\n// =============================================================================\r\n// ANIMATED ICON WRAPPER\r\n// Wraps Phosphor icons with Motion for smooth transitions\r\n// =============================================================================\r\n\r\ntype AnimationTarget = boolean | TargetAndTransition | VariantLabels;\r\n\r\nexport type AnimatedIconProps = {\r\n  /** The Phosphor icon component to render */\r\n  icon: Icon;\r\n  /** Optional className for styling */\r\n  className?: string;\r\n  /** Size of the icon (inherits from parent if not specified) */\r\n  size?: number | string;\r\n  /** Stroke width */\r\n  strokeWidth?: number;\r\n  /** Animation variants */\r\n  variants?: Variants;\r\n  /** Initial animation state */\r\n  initial?: AnimationTarget;\r\n  /** Animate to this state */\r\n  animate?: AnimationTarget;\r\n  /** Exit animation state */\r\n  exit?: TargetAndTransition | VariantLabels;\r\n  /** Layout ID for shared element transitions */\r\n  layoutId?: string;\r\n  /** Whether to disable animations */\r\n  disableAnimation?: boolean;\r\n} & Omit<React.SVGProps<SVGSVGElement>, \"ref\">;\r\n\r\n/**\r\n * AnimatedIcon - Wraps Lucide icons with Motion for animations\r\n *\r\n * @example\r\n * ```tsx\r\n * <AnimatedIcon\r\n *   icon={CheckIcon}\r\n *   animate={{ scale: 1, opacity: 1 }}\r\n *   initial={{ scale: 0, opacity: 0 }}\r\n * />\r\n * ```\r\n */\r\nexport function AnimatedIcon({\r\n  icon: Icon,\r\n  className,\r\n  size,\r\n  strokeWidth = 2,\r\n  variants,\r\n  initial = \"initial\" as VariantLabels,\r\n  animate = \"animate\" as VariantLabels,\r\n  exit = \"exit\" as VariantLabels,\r\n  layoutId,\r\n  disableAnimation = false,\r\n  ...props\r\n}: AnimatedIconProps) {\r\n  // Filter out motion-specific props that conflict with SVG\r\n  const {\r\n    onAnimationStart: _onAnimationStart,\r\n    onDrag: _onDrag,\r\n    onDragStart: _onDragStart,\r\n    onDragEnd: _onDragEnd,\r\n    ...iconProps\r\n  } = props as Record<string, unknown>;\r\n\r\n  if (disableAnimation) {\r\n    return (\r\n      <Icon\r\n        className={className}\r\n        size={size}\r\n        strokeWidth={strokeWidth}\r\n        {...(iconProps as React.SVGProps<SVGSVGElement>)}\r\n      />\r\n    );\r\n  }\r\n\r\n  // Use motion.div wrapper instead of motion.create to avoid ESLint static-components error\r\n  return (\r\n    <motion.span\r\n      className={cn(\"inline-flex shrink-0\", className)}\r\n      variants={variants}\r\n      initial={initial}\r\n      animate={animate}\r\n      exit={exit}\r\n      layoutId={layoutId}\r\n      transition={springPresets.snappy}\r\n    >\r\n      <Icon\r\n        size={size}\r\n        strokeWidth={strokeWidth}\r\n        {...(iconProps as React.SVGProps<SVGSVGElement>)}\r\n      />\r\n    </motion.span>\r\n  );\r\n}\r\n\r\n// =============================================================================\r\n// ICON MORPH - Morphs between two icons\r\n// =============================================================================\r\n\r\nexport type IconMorphProps = {\r\n  /** First icon (shown when isActive is false) */\r\n  iconA: Icon;\r\n  /** Second icon (shown when isActive is true) */\r\n  iconB: Icon;\r\n  /** Current state */\r\n  isActive: boolean;\r\n  /** Unique ID for layout animations */\r\n  layoutId?: string;\r\n  /** Icon size */\r\n  size?: number | string;\r\n  /** Stroke width */\r\n  strokeWidth?: number;\r\n  /** Additional className */\r\n  className?: string;\r\n  /** Whether to disable animations */\r\n  disableAnimation?: boolean;\r\n};\r\n\r\nconst morphVariants: Variants = {\r\n  initial: { scale: 0, rotate: -90, opacity: 0 },\r\n  animate: { scale: 1, rotate: 0, opacity: 1 },\r\n  exit: { scale: 0, rotate: 90, opacity: 0 },\r\n};\r\n\r\n/**\r\n * IconMorph - Smoothly transitions between two icons\r\n *\r\n * @example\r\n * ```tsx\r\n * <IconMorph\r\n *   iconA={MenuIcon}\r\n *   iconB={XIcon}\r\n *   isActive={isMenuOpen}\r\n * />\r\n * ```\r\n */\r\nexport function IconMorph({\r\n  iconA: IconA,\r\n  iconB: IconB,\r\n  isActive,\r\n  layoutId,\r\n  size = 24,\r\n  strokeWidth = 2,\r\n  className,\r\n  disableAnimation = false,\r\n}: IconMorphProps) {\r\n  const CurrentIcon = isActive ? IconB : IconA;\r\n\r\n  if (disableAnimation) {\r\n    return (\r\n      <CurrentIcon\r\n        className={className}\r\n        size={size}\r\n        strokeWidth={strokeWidth}\r\n      />\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div\r\n      className={cn(\"relative\", className)}\r\n      style={{ width: size, height: size }}\r\n    >\r\n      <AnimatePresence mode=\"wait\" initial={false}>\r\n        <AnimatedIcon\r\n          key={isActive ? \"active\" : \"inactive\"}\r\n          icon={CurrentIcon}\r\n          size={size}\r\n          strokeWidth={strokeWidth}\r\n          variants={morphVariants}\r\n          layoutId={layoutId}\r\n          className=\"absolute inset-0\"\r\n        />\r\n      </AnimatePresence>\r\n    </div>\r\n  );\r\n}\r\n\r\n// =============================================================================\r\n// LOADING SPINNER\r\n// Animated spinning loader\r\n// =============================================================================\r\n\r\nexport type LoadingSpinnerProps = {\r\n  /** Size of the spinner */\r\n  size?: number;\r\n  /** Stroke width */\r\n  strokeWidth?: number;\r\n  /** Additional className */\r\n  className?: string;\r\n  /** Whether to show the spinner */\r\n  show?: boolean;\r\n};\r\n\r\n/**\r\n * LoadingSpinner - Animated loading indicator\r\n */\r\nexport function LoadingSpinner({\r\n  size = 16,\r\n  strokeWidth = 2,\r\n  className,\r\n  show = true,\r\n}: LoadingSpinnerProps) {\r\n  if (!show) return null;\r\n\r\n  return (\r\n    <motion.svg\r\n      width={size}\r\n      height={size}\r\n      viewBox=\"0 0 24 24\"\r\n      fill=\"none\"\r\n      className={cn(\"animate-spin\", className)}\r\n      initial={{ opacity: 0, scale: 0.8 }}\r\n      animate={{ opacity: 1, scale: 1 }}\r\n      exit={{ opacity: 0, scale: 0.8 }}\r\n      transition={springPresets.snappy}\r\n    >\r\n      <circle\r\n        cx=\"12\"\r\n        cy=\"12\"\r\n        r=\"10\"\r\n        stroke=\"currentColor\"\r\n        strokeWidth={strokeWidth}\r\n        strokeOpacity={0.25}\r\n        fill=\"none\"\r\n      />\r\n      <path\r\n        d=\"M12 2C6.477 2 2 6.477 2 12\"\r\n        stroke=\"currentColor\"\r\n        strokeWidth={strokeWidth}\r\n        strokeLinecap=\"round\"\r\n        fill=\"none\"\r\n      />\r\n    </motion.svg>\r\n  );\r\n}\r\n\r\n// =============================================================================\r\n// CHECKMARK ICON\r\n// Animated check mark for success states\r\n// =============================================================================\r\n\r\nexport type AnimatedCheckProps = {\r\n  /** Size of the checkmark */\r\n  size?: number;\r\n  /** Stroke width */\r\n  strokeWidth?: number;\r\n  /** Additional className */\r\n  className?: string;\r\n  /** Whether to show the checkmark */\r\n  show?: boolean;\r\n  /** Delay before animation starts */\r\n  delay?: number;\r\n};\r\n\r\n/**\r\n * AnimatedCheck - Draw-on checkmark animation\r\n */\r\nexport function AnimatedCheck({\r\n  size = 24,\r\n  strokeWidth = 2,\r\n  className,\r\n  show = true,\r\n  delay = 0,\r\n}: AnimatedCheckProps) {\r\n  return (\r\n    <AnimatePresence>\r\n      {show && (\r\n        <motion.svg\r\n          width={size}\r\n          height={size}\r\n          viewBox=\"0 0 24 24\"\r\n          fill=\"none\"\r\n          className={className}\r\n          initial={{ opacity: 0, scale: 0.8 }}\r\n          animate={{ opacity: 1, scale: 1 }}\r\n          exit={{ opacity: 0, scale: 0.8 }}\r\n          transition={{ ...springPresets.bouncy, delay }}\r\n        >\r\n          <motion.path\r\n            d=\"M5 13l4 4L19 7\"\r\n            stroke=\"currentColor\"\r\n            strokeWidth={strokeWidth}\r\n            strokeLinecap=\"round\"\r\n            strokeLinejoin=\"round\"\r\n            fill=\"none\"\r\n            initial={{ pathLength: 0 }}\r\n            animate={{ pathLength: 1 }}\r\n            transition={{ duration: 0.3, delay: delay + 0.1, ease: \"easeOut\" }}\r\n          />\r\n        </motion.svg>\r\n      )}\r\n    </AnimatePresence>\r\n  );\r\n}\r\n\r\n// =============================================================================\r\n// CLOSE BUTTON\r\n// Circular close button with animation\r\n// =============================================================================\r\n\r\nexport type CloseButtonProps = {\r\n  /** Click handler */\r\n  onClick?: () => void;\r\n  /** Size of the button */\r\n  size?: \"sm\" | \"md\" | \"lg\";\r\n  /** Whether to disable animations */\r\n  disableAnimation?: boolean;\r\n  /** Additional className */\r\n  className?: string;\r\n  /** ARIA label */\r\n  \"aria-label\"?: string;\r\n};\r\n\r\nconst sizeMap = {\r\n  sm: { button: 24, icon: 14 },\r\n  md: { button: 32, icon: 18 },\r\n  lg: { button: 40, icon: 22 },\r\n};\r\n\r\n/**\r\n * CloseButton - Circular close button with smooth animation\r\n */\r\nexport function CloseButton({\r\n  onClick,\r\n  size = \"md\",\r\n  disableAnimation = false,\r\n  className,\r\n  \"aria-label\": ariaLabel = \"Close\",\r\n}: CloseButtonProps) {\r\n  const dimensions = sizeMap[size];\r\n\r\n  const ButtonComponent = disableAnimation ? \"button\" : motion.button;\r\n  const motionProps = disableAnimation\r\n    ? {}\r\n    : {\r\n        whileHover: { scale: 1.1, backgroundColor: \"var(--muted)\" },\r\n        whileTap: { scale: 0.95 },\r\n        transition: springPresets.snappy,\r\n      };\r\n\r\n  return (\r\n    <ButtonComponent\r\n      type=\"button\"\r\n      onClick={onClick}\r\n      className={cn(\r\n        \"inline-flex items-center justify-center rounded-full\",\r\n        \"bg-muted/50 text-muted-foreground hover:bg-muted hover:text-foreground\",\r\n        \"transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring\",\r\n        className,\r\n      )}\r\n      style={{\r\n        width: dimensions.button,\r\n        height: dimensions.button,\r\n      }}\r\n      aria-label={ariaLabel}\r\n      {...motionProps}\r\n    >\r\n      <svg\r\n        width={dimensions.icon}\r\n        height={dimensions.icon}\r\n        viewBox=\"0 0 24 24\"\r\n        fill=\"none\"\r\n        stroke=\"currentColor\"\r\n        strokeWidth={2}\r\n        strokeLinecap=\"round\"\r\n        strokeLinejoin=\"round\"\r\n      >\r\n        <path d=\"M18 6L6 18\" />\r\n        <path d=\"M6 6l12 12\" />\r\n      </svg>\r\n    </ButtonComponent>\r\n  );\r\n}\r\n\r\n// =============================================================================\r\n// CHEVRON ICON\r\n// Rotatable chevron for expandable sections\r\n// =============================================================================\r\n\r\nexport type AnimatedChevronProps = {\r\n  /** Direction/rotation state */\r\n  direction: \"up\" | \"down\" | \"left\" | \"right\";\r\n  /** Size of the chevron */\r\n  size?: number;\r\n  /** Additional className */\r\n  className?: string;\r\n  /** Whether to disable animations */\r\n  disableAnimation?: boolean;\r\n};\r\n\r\nconst rotationMap = {\r\n  up: -90,\r\n  down: 90,\r\n  left: 180,\r\n  right: 0,\r\n};\r\n\r\n/**\r\n * AnimatedChevron - Smoothly rotates between directions\r\n */\r\nexport function AnimatedChevron({\r\n  direction,\r\n  size = 16,\r\n  className,\r\n  disableAnimation = false,\r\n}: AnimatedChevronProps) {\r\n  const rotation = rotationMap[direction];\r\n\r\n  const SvgComponent = disableAnimation ? \"svg\" : motion.svg;\r\n  const motionProps = disableAnimation\r\n    ? { style: { transform: `rotate(${rotation}deg)` } }\r\n    : {\r\n        animate: { rotate: rotation },\r\n        transition: springPresets.snappy,\r\n      };\r\n\r\n  return (\r\n    <SvgComponent\r\n      width={size}\r\n      height={size}\r\n      viewBox=\"0 0 24 24\"\r\n      fill=\"none\"\r\n      stroke=\"currentColor\"\r\n      strokeWidth={2}\r\n      strokeLinecap=\"round\"\r\n      strokeLinejoin=\"round\"\r\n      className={className}\r\n      {...motionProps}\r\n    >\r\n      <path d=\"M9 18l6-6-6-6\" />\r\n    </SvgComponent>\r\n  );\r\n}\r\n\r\n// =============================================================================\r\n// DRAG HANDLE\r\n// Pill indicator for draggable sheets\r\n// =============================================================================\r\n\r\nexport type DragHandleProps = {\r\n  /** Additional className */\r\n  className?: string;\r\n};\r\n\r\n/**\r\n * DragHandle - Drag indicator pill for sheets\r\n */\r\nexport function DragHandle({ className }: DragHandleProps) {\r\n  return (\r\n    <div\r\n      className={cn(\r\n        \"mx-auto w-10 h-1.5 rounded-full bg-muted-foreground/30\",\r\n        \"shrink-0\",\r\n        className,\r\n      )}\r\n      aria-hidden=\"true\"\r\n    />\r\n  );\r\n}\r\n",
      "type": "registry:lib"
    },
    {
      "path": "components/motion-provider.tsx",
      "content": "\"use client\";\r\n\r\nimport * as React from \"react\";\r\nimport { createContext, useContext, useMemo } from \"react\";\r\nimport { MotionConfig, type Transition } from \"motion/react\";\r\nimport { useReducedMotion } from \"@/hooks/use-reduced-motion\";\r\nimport { useLowPowerDevice } from \"@/hooks/use-low-power-device\";\r\nimport { transitions } from \"@/lib/motion\";\r\n\r\n// =============================================================================\r\n// TYPES\r\n// =============================================================================\r\n\r\nexport type ReducedMotionSetting = \"user\" | \"always\" | \"never\";\r\n\r\nexport type MotionContextValue = {\r\n  /** Current reduced motion setting */\r\n  reducedMotion: ReducedMotionSetting;\r\n  /** Whether animations are effectively disabled */\r\n  isAnimationDisabled: boolean;\r\n  /** Whether low-power mode auto-disable is enabled */\r\n  lowPowerAutoDisable: boolean;\r\n  /** Low power device state */\r\n  lowPowerState: {\r\n    isLowPower: boolean;\r\n    batteryLevel: number | null;\r\n    isCharging: boolean | null;\r\n  };\r\n  /** Default transition based on current settings */\r\n  defaultTransition: Transition;\r\n};\r\n\r\nexport type MotionProviderProps = {\r\n  children: React.ReactNode;\r\n  /** How to handle reduced motion: 'user' (system preference), 'always' (force reduced), 'never' (force animations) */\r\n  reducedMotion?: ReducedMotionSetting;\r\n  /** Automatically disable animations on low-power devices */\r\n  lowPowerAutoDisable?: boolean;\r\n  /** Default transition for all Motion components */\r\n  defaultTransition?: Transition;\r\n  /** Additional className for the provider wrapper */\r\n  className?: string;\r\n};\r\n\r\n// =============================================================================\r\n// CONTEXT\r\n// =============================================================================\r\n\r\nconst MotionContext = createContext<MotionContextValue | null>(null);\r\n\r\n/**\r\n * Hook to access motion configuration\r\n *\r\n * @returns Motion context value with animation settings\r\n * @throws Error if used outside of MotionProvider\r\n *\r\n * @example\r\n * ```tsx\r\n * function AnimatedButton() {\r\n *   const { isAnimationDisabled } = useMotionConfig();\r\n *\r\n *   return (\r\n *     <motion.button\r\n *       whileTap={isAnimationDisabled ? undefined : { scale: 0.95 }}\r\n *     />\r\n *   );\r\n * }\r\n * ```\r\n */\r\nexport function useMotionConfig(): MotionContextValue {\r\n  const context = useContext(MotionContext);\r\n\r\n  if (!context) {\r\n    throw new Error(\"useMotionConfig must be used within a MotionProvider\");\r\n  }\r\n\r\n  return context;\r\n}\r\n\r\n/**\r\n * Hook to check if animations should be disabled for a component\r\n *\r\n * @param disableAnimation - Optional local override to disable animation\r\n * @returns Whether animations should be disabled\r\n *\r\n * @example\r\n * ```tsx\r\n * function Button({ disableAnimation }) {\r\n *   const shouldDisable = useShouldDisableAnimation(disableAnimation);\r\n *\r\n *   if (shouldDisable) {\r\n *     return <button>Click me</button>;\r\n *   }\r\n *\r\n *   return <motion.button whileTap={{ scale: 0.95 }}>Click me</motion.button>;\r\n * }\r\n * ```\r\n */\r\nexport function useShouldDisableAnimation(disableAnimation?: boolean): boolean {\r\n  const context = useContext(MotionContext);\r\n  const prefersReducedMotion = useReducedMotion();\r\n\r\n  // Local override takes precedence\r\n  if (disableAnimation !== undefined) {\r\n    return disableAnimation;\r\n  }\r\n\r\n  // If no provider, check system preference directly\r\n  if (!context) {\r\n    return prefersReducedMotion;\r\n  }\r\n\r\n  return context.isAnimationDisabled;\r\n}\r\n\r\n/**\r\n * Hook to get the appropriate transition based on animation settings\r\n *\r\n * @param transition - Desired transition when animations are enabled\r\n * @param disableAnimation - Optional local override\r\n * @returns The transition to use (reduced if animations disabled)\r\n */\r\nexport function useAnimationTransition(\r\n  transition: Transition = transitions.default,\r\n  disableAnimation?: boolean,\r\n): Transition {\r\n  const shouldDisable = useShouldDisableAnimation(disableAnimation);\r\n\r\n  if (shouldDisable) {\r\n    return transitions.reduced;\r\n  }\r\n\r\n  return transition;\r\n}\r\n\r\n// =============================================================================\r\n// PROVIDER COMPONENT\r\n// =============================================================================\r\n\r\n/**\r\n * MotionProvider - Global animation configuration provider\r\n *\r\n * Wraps Motion's MotionConfig with additional context for:\r\n * - Reduced motion preferences (system or manual)\r\n * - Low-power device detection\r\n * - Global transition defaults\r\n *\r\n * @example\r\n * ```tsx\r\n * // In your app layout\r\n * <MotionProvider\r\n *   reducedMotion=\"user\"\r\n *   lowPowerAutoDisable\r\n * >\r\n *   <App />\r\n * </MotionProvider>\r\n * ```\r\n */\r\nexport function MotionProvider({\r\n  children,\r\n  reducedMotion = \"user\",\r\n  lowPowerAutoDisable = true,\r\n  defaultTransition = transitions.default,\r\n}: MotionProviderProps) {\r\n  // System preference for reduced motion\r\n  const prefersReducedMotion = useReducedMotion();\r\n\r\n  // Low-power device detection\r\n  const lowPowerState = useLowPowerDevice();\r\n\r\n  // Determine if animations should be disabled\r\n  const isAnimationDisabled = useMemo(() => {\r\n    // 'always' forces reduced motion\r\n    if (reducedMotion === \"always\") {\r\n      return true;\r\n    }\r\n\r\n    // 'never' forces animations (ignores preferences)\r\n    if (reducedMotion === \"never\") {\r\n      return false;\r\n    }\r\n\r\n    // 'user' respects system preference\r\n    if (prefersReducedMotion) {\r\n      return true;\r\n    }\r\n\r\n    // Check low-power mode if auto-disable is enabled\r\n    if (lowPowerAutoDisable && lowPowerState.shouldReduceAnimations) {\r\n      return true;\r\n    }\r\n\r\n    return false;\r\n  }, [\r\n    reducedMotion,\r\n    prefersReducedMotion,\r\n    lowPowerAutoDisable,\r\n    lowPowerState.shouldReduceAnimations,\r\n  ]);\r\n\r\n  // Get effective transition\r\n  const effectiveTransition = useMemo(() => {\r\n    if (isAnimationDisabled) {\r\n      return transitions.reduced;\r\n    }\r\n    return defaultTransition;\r\n  }, [isAnimationDisabled, defaultTransition]);\r\n\r\n  // Context value\r\n  const contextValue = useMemo<MotionContextValue>(\r\n    () => ({\r\n      reducedMotion,\r\n      isAnimationDisabled,\r\n      lowPowerAutoDisable,\r\n      lowPowerState: {\r\n        isLowPower: lowPowerState.isLowPower,\r\n        batteryLevel: lowPowerState.batteryLevel,\r\n        isCharging: lowPowerState.isCharging,\r\n      },\r\n      defaultTransition: effectiveTransition,\r\n    }),\r\n    [\r\n      reducedMotion,\r\n      isAnimationDisabled,\r\n      lowPowerAutoDisable,\r\n      lowPowerState.isLowPower,\r\n      lowPowerState.batteryLevel,\r\n      lowPowerState.isCharging,\r\n      effectiveTransition,\r\n    ],\r\n  );\r\n\r\n  return (\r\n    <MotionContext.Provider value={contextValue}>\r\n      <MotionConfig\r\n        transition={effectiveTransition}\r\n        reducedMotion={isAnimationDisabled ? \"always\" : \"user\"}\r\n      >\r\n        {children}\r\n      </MotionConfig>\r\n    </MotionContext.Provider>\r\n  );\r\n}\r\n\r\n// =============================================================================\r\n// EXPORTS\r\n// =============================================================================\r\n\r\nexport { MotionContext };\r\n",
      "type": "registry:component"
    },
    {
      "path": "hooks/use-reduced-motion.ts",
      "content": "\"use client\";\r\n\r\nimport { useSyncExternalStore, useCallback } from \"react\";\r\n\r\n/**\r\n * Hook to detect user's reduced motion preference\r\n *\r\n * Uses the `prefers-reduced-motion` media query to detect if the user\r\n * has requested reduced motion in their system settings.\r\n *\r\n * @param override - Optional boolean to override the system preference\r\n * @returns Whether reduced motion is preferred\r\n *\r\n * @example\r\n * ```tsx\r\n * function MyComponent() {\r\n *   const prefersReducedMotion = useReducedMotion();\r\n *\r\n *   return (\r\n *     <motion.div\r\n *       animate={{ x: prefersReducedMotion ? 0 : 100 }}\r\n *     />\r\n *   );\r\n * }\r\n * ```\r\n */\r\nexport function useReducedMotion(override?: boolean): boolean {\r\n  const subscribe = useCallback((callback: () => void) => {\r\n    if (typeof window === \"undefined\") return () => {};\r\n\r\n    const mediaQuery = window.matchMedia(\"(prefers-reduced-motion: reduce)\");\r\n\r\n    mediaQuery.addEventListener(\"change\", callback);\r\n    return () => mediaQuery.removeEventListener(\"change\", callback);\r\n  }, []);\r\n\r\n  const getSnapshot = useCallback(() => {\r\n    if (typeof window === \"undefined\") return false;\r\n    return window.matchMedia(\"(prefers-reduced-motion: reduce)\").matches;\r\n  }, []);\r\n\r\n  // Server snapshot should always return false for SSR\r\n  const getServerSnapshot = useCallback(() => false, []);\r\n\r\n  const prefersReducedMotion = useSyncExternalStore(\r\n    subscribe,\r\n    getSnapshot,\r\n    getServerSnapshot,\r\n  );\r\n\r\n  // Override takes precedence if provided\r\n  if (override !== undefined) {\r\n    return override;\r\n  }\r\n\r\n  return prefersReducedMotion;\r\n}\r\n\r\nexport default useReducedMotion;\r\n",
      "type": "registry:hook"
    },
    {
      "path": "hooks/use-low-power-device.ts",
      "content": "\"use client\";\r\n\r\nimport { useSyncExternalStore, useCallback } from \"react\";\r\n\r\n/**\r\n * Hook to detect if the device is in a low-power state\r\n *\r\n * Checks Battery API and hardware concurrency to determine if\r\n * animations should be reduced for performance reasons.\r\n *\r\n * @returns Object with power state information\r\n *\r\n * @example\r\n * ```tsx\r\n * function AnimatedComponent() {\r\n *   const { isLowPower, shouldReduceAnimations } = useLowPowerDevice();\r\n *\r\n *   return (\r\n *     <motion.div\r\n *       animate={{ scale: shouldReduceAnimations ? 1 : 1.1 }}\r\n *     />\r\n *   );\r\n * }\r\n * ```\r\n */\r\n\r\ntype BatteryManager = {\r\n  charging: boolean;\r\n  level: number;\r\n  addEventListener: (type: string, listener: () => void) => void;\r\n  removeEventListener: (type: string, listener: () => void) => void;\r\n};\r\n\r\ntype NavigatorWithBattery = Navigator & {\r\n  getBattery?: () => Promise<BatteryManager>;\r\n};\r\n\r\nexport type LowPowerState = {\r\n  /** Whether the device is considered low-power */\r\n  isLowPower: boolean;\r\n  /** Whether animations should be reduced */\r\n  shouldReduceAnimations: boolean;\r\n  /** Battery level (0-1) if available */\r\n  batteryLevel: number | null;\r\n  /** Whether the device is charging */\r\n  isCharging: boolean | null;\r\n  /** Number of logical CPU cores */\r\n  hardwareConcurrency: number;\r\n};\r\n\r\n// Battery state cache\r\nlet batteryManager: BatteryManager | null = null;\r\nlet batteryPromise: Promise<BatteryManager | null> | null = null;\r\n\r\n// Get battery manager (cached)\r\nasync function getBatteryManager(): Promise<BatteryManager | null> {\r\n  if (batteryManager) return batteryManager;\r\n  if (batteryPromise) return batteryPromise;\r\n\r\n  if (typeof navigator === \"undefined\") return null;\r\n\r\n  const nav = navigator as NavigatorWithBattery;\r\n  if (!nav.getBattery) return null;\r\n\r\n  batteryPromise = nav.getBattery().catch(() => null);\r\n  batteryManager = await batteryPromise;\r\n  return batteryManager;\r\n}\r\n\r\n// Initialize battery manager on module load\r\nif (typeof window !== \"undefined\") {\r\n  getBatteryManager();\r\n}\r\n\r\n// Server snapshot - defined once at module level to avoid re-creation\r\nconst serverSnapshot: LowPowerState = {\r\n  isLowPower: false,\r\n  shouldReduceAnimations: false,\r\n  batteryLevel: null,\r\n  isCharging: null,\r\n  hardwareConcurrency: 4,\r\n};\r\n\r\n// Cache the current snapshot to avoid unnecessary re-renders\r\nlet cachedSnapshot: LowPowerState = serverSnapshot;\r\n\r\n// Function to get current snapshot (called outside of React)\r\nfunction getCurrentSnapshot(): LowPowerState {\r\n  if (typeof window === \"undefined\") {\r\n    return serverSnapshot;\r\n  }\r\n\r\n  const hardwareConcurrency = navigator.hardwareConcurrency || 4;\r\n  const isLowEndDevice = hardwareConcurrency <= 4;\r\n\r\n  // Check battery if available\r\n  let batteryLevel: number | null = null;\r\n  let isCharging: boolean | null = null;\r\n  let isLowBattery = false;\r\n\r\n  if (batteryManager) {\r\n    batteryLevel = batteryManager.level;\r\n    isCharging = batteryManager.charging;\r\n    // Consider low battery if below 20% and not charging\r\n    isLowBattery = batteryLevel < 0.2 && !isCharging;\r\n  }\r\n\r\n  const isLowPower = isLowEndDevice || isLowBattery;\r\n  const shouldReduceAnimations = isLowPower;\r\n\r\n  // Only create new object if values actually changed\r\n  const newSnapshot = {\r\n    isLowPower,\r\n    shouldReduceAnimations,\r\n    batteryLevel,\r\n    isCharging,\r\n    hardwareConcurrency,\r\n  };\r\n\r\n  // Compare with cached snapshot\r\n  if (\r\n    cachedSnapshot.isLowPower === newSnapshot.isLowPower &&\r\n    cachedSnapshot.shouldReduceAnimations ===\r\n      newSnapshot.shouldReduceAnimations &&\r\n    cachedSnapshot.batteryLevel === newSnapshot.batteryLevel &&\r\n    cachedSnapshot.isCharging === newSnapshot.isCharging &&\r\n    cachedSnapshot.hardwareConcurrency === newSnapshot.hardwareConcurrency\r\n  ) {\r\n    return cachedSnapshot;\r\n  }\r\n\r\n  cachedSnapshot = newSnapshot;\r\n  return cachedSnapshot;\r\n}\r\n\r\nexport function useLowPowerDevice(): LowPowerState {\r\n  const getSnapshot = () => getCurrentSnapshot();\r\n\r\n  const getServerSnapshot = () => serverSnapshot;\r\n\r\n  const subscribe = useCallback((callback: () => void) => {\r\n    if (typeof window === \"undefined\") return () => {};\r\n\r\n    // Subscribe to battery events if available\r\n    getBatteryManager().then((battery) => {\r\n      if (battery) {\r\n        battery.addEventListener(\"chargingchange\", callback);\r\n        battery.addEventListener(\"levelchange\", callback);\r\n      }\r\n    });\r\n\r\n    // Clean up\r\n    return () => {\r\n      if (batteryManager) {\r\n        batteryManager.removeEventListener(\"chargingchange\", callback);\r\n        batteryManager.removeEventListener(\"levelchange\", callback);\r\n      }\r\n    };\r\n  }, []);\r\n\r\n  return useSyncExternalStore(subscribe, getSnapshot, getServerSnapshot);\r\n}\r\n\r\nexport default useLowPowerDevice;\r\n",
      "type": "registry:hook"
    },
    {
      "path": "lib/motion.ts",
      "content": "import type { Transition, Variants } from \"motion/react\";\r\n\r\n// =============================================================================\r\n// SPRING PRESETS\r\n// Spring physics configurations for animations\r\n// =============================================================================\r\n\r\n/**\r\n * Spring presets for consistent animations\r\n */\r\nexport const springPresets = {\r\n  /**\r\n   * Snappy - Quick, responsive interactions (buttons, toggles)\r\n   * High stiffness, high damping = fast and controlled\r\n   */\r\n  snappy: {\r\n    type: \"spring\" as const,\r\n    stiffness: 400,\r\n    damping: 30,\r\n    mass: 1,\r\n  },\r\n\r\n  /**\r\n   * Bouncy - Playful, attention-grabbing (notifications, toasts)\r\n   * Medium stiffness, lower damping = visible bounce\r\n   */\r\n  bouncy: {\r\n    type: \"spring\" as const,\r\n    stiffness: 300,\r\n    damping: 20,\r\n    mass: 1,\r\n  },\r\n\r\n  /**\r\n   * Smooth - Slow transitions (modals, sheets)\r\n   * Lower stiffness, higher damping = graceful movement\r\n   */\r\n  smooth: {\r\n    type: \"spring\" as const,\r\n    stiffness: 200,\r\n    damping: 25,\r\n    mass: 1,\r\n  },\r\n\r\n  /**\r\n   * Gentle - Subtle, background animations (fade, scale)\r\n   * Very low stiffness, high damping = barely perceptible\r\n   */\r\n  gentle: {\r\n    type: \"spring\" as const,\r\n    stiffness: 150,\r\n    damping: 30,\r\n    mass: 1,\r\n  },\r\n\r\n  /**\r\n   * Interactive - Drag and gesture responses\r\n   * Balanced for real-time responsiveness\r\n   */\r\n  interactive: {\r\n    type: \"spring\" as const,\r\n    stiffness: 500,\r\n    damping: 35,\r\n    mass: 0.8,\r\n  },\r\n} as const;\r\n\r\n// =============================================================================\r\n// TRANSITION PRESETS\r\n// Pre-configured transitions for common use cases\r\n// =============================================================================\r\n\r\nexport const transitions = {\r\n  /** Standard transition using snappy spring */\r\n  default: springPresets.snappy as Transition,\r\n\r\n  /** For modal/dialog opening animations */\r\n  modal: springPresets.smooth as Transition,\r\n\r\n  /** For dropdown/popover appearance */\r\n  popover: {\r\n    ...springPresets.snappy,\r\n    duration: 0.2,\r\n  } as Transition,\r\n\r\n  /** For morphing popover with layoutId */\r\n  morphingPopover: {\r\n    type: \"spring\" as const,\r\n    bounce: 0.05,\r\n    duration: 0.3,\r\n  } as Transition,\r\n\r\n  /** For sheet slide-in animations */\r\n  sheet: {\r\n    ...springPresets.smooth,\r\n    damping: 28,\r\n  } as Transition,\r\n\r\n  /** For button press feedback */\r\n  button: {\r\n    ...springPresets.interactive,\r\n    duration: 0.1,\r\n  } as Transition,\r\n\r\n  /** For icon state changes */\r\n  icon: {\r\n    ...springPresets.bouncy,\r\n    duration: 0.3,\r\n  } as Transition,\r\n\r\n  /** For staggered list items */\r\n  stagger: {\r\n    staggerChildren: 0.03,\r\n    delayChildren: 0.05,\r\n  } as Transition,\r\n\r\n  /** Fast fade for overlays */\r\n  fade: {\r\n    type: \"tween\" as const,\r\n    duration: 0.15,\r\n    ease: \"easeOut\",\r\n  } as Transition,\r\n\r\n  /** Reduced motion fallback - instant transitions */\r\n  reduced: {\r\n    type: \"tween\" as const,\r\n    duration: 0,\r\n  } as Transition,\r\n} as const;\r\n\r\n// =============================================================================\r\n// VARIANT FACTORIES\r\n// Create animation variants for common patterns\r\n// =============================================================================\r\n\r\n/**\r\n * Creates scale variants for press/tap interactions\r\n */\r\nexport function createPressVariants(scale: number = 0.97): Variants {\r\n  return {\r\n    idle: { scale: 1 },\r\n    pressed: { scale },\r\n  };\r\n}\r\n\r\n/**\r\n * Creates hover scale variants\r\n */\r\nexport function createHoverVariants(scale: number = 1.02): Variants {\r\n  return {\r\n    idle: { scale: 1 },\r\n    hovered: { scale },\r\n  };\r\n}\r\n\r\n/**\r\n * Creates fade + scale variants for modal-like components\r\n */\r\nexport function createModalVariants(options?: {\r\n  initialScale?: number;\r\n  exitScale?: number;\r\n}): Variants {\r\n  const { initialScale = 0.95, exitScale = 0.95 } = options ?? {};\r\n\r\n  return {\r\n    initial: {\r\n      opacity: 0,\r\n      scale: initialScale,\r\n    },\r\n    animate: {\r\n      opacity: 1,\r\n      scale: 1,\r\n    },\r\n    exit: {\r\n      opacity: 0,\r\n      scale: exitScale,\r\n    },\r\n  };\r\n}\r\n\r\n/**\r\n * Creates slide variants for sheets/drawers\r\n */\r\nexport function createSlideVariants(\r\n  side: \"top\" | \"right\" | \"bottom\" | \"left\",\r\n): Variants {\r\n  const transforms: Record<\r\n    string,\r\n    { x?: string | number; y?: string | number }\r\n  > = {\r\n    top: { y: \"-100%\" },\r\n    right: { x: \"100%\" },\r\n    bottom: { y: \"100%\" },\r\n    left: { x: \"-100%\" },\r\n  };\r\n\r\n  return {\r\n    initial: { ...transforms[side], opacity: 0 },\r\n    animate: { x: 0, y: 0, opacity: 1 },\r\n    exit: { ...transforms[side], opacity: 0 },\r\n  };\r\n}\r\n\r\n/**\r\n * Creates staggered children variants for lists\r\n */\r\nexport function createStaggerVariants(options?: {\r\n  staggerChildren?: number;\r\n  delayChildren?: number;\r\n}): Variants {\r\n  const { staggerChildren = 0.03, delayChildren = 0.05 } = options ?? {};\r\n\r\n  return {\r\n    initial: { opacity: 0 },\r\n    animate: {\r\n      opacity: 1,\r\n      transition: {\r\n        staggerChildren,\r\n        delayChildren,\r\n      },\r\n    },\r\n    exit: {\r\n      opacity: 0,\r\n      transition: {\r\n        staggerChildren: staggerChildren / 2,\r\n        staggerDirection: -1,\r\n      },\r\n    },\r\n  };\r\n}\r\n\r\n/**\r\n * Creates item variants for staggered lists\r\n */\r\nexport function createStaggerItemVariants(options?: {\r\n  y?: number;\r\n  scale?: number;\r\n}): Variants {\r\n  const { y = 10, scale = 0.95 } = options ?? {};\r\n\r\n  return {\r\n    initial: { opacity: 0, y, scale },\r\n    animate: { opacity: 1, y: 0, scale: 1 },\r\n    exit: { opacity: 0, y: y / 2, scale },\r\n  };\r\n}\r\n\r\n/**\r\n * Creates morphing popover variants with blur\r\n */\r\nexport function createMorphingPopoverVariants(options?: {\r\n  initialScale?: number;\r\n  exitScale?: number;\r\n  initialBlur?: number;\r\n  exitBlur?: number;\r\n}): Variants {\r\n  const {\r\n    initialScale = 0.9,\r\n    exitScale = 0.95,\r\n    initialBlur = 10,\r\n    exitBlur = 10,\r\n  } = options ?? {};\r\n\r\n  return {\r\n    initial: {\r\n      opacity: 0,\r\n      scale: initialScale,\r\n      filter: `blur(${initialBlur}px)`,\r\n    },\r\n    animate: {\r\n      opacity: 1,\r\n      scale: 1,\r\n      filter: \"blur(0px)\",\r\n      transition: {\r\n        type: \"spring\",\r\n        bounce: 0,\r\n        duration: 0.3,\r\n        staggerChildren: 0.05,\r\n      },\r\n    },\r\n    exit: {\r\n      opacity: 0,\r\n      scale: exitScale,\r\n      filter: `blur(${exitBlur}px)`,\r\n      transition: {\r\n        duration: 0.2,\r\n      },\r\n    },\r\n  };\r\n}\r\n\r\n/**\r\n * Creates backdrop/overlay variants\r\n */\r\nexport function createBackdropVariants(): Variants {\r\n  return {\r\n    initial: { opacity: 0 },\r\n    animate: { opacity: 1 },\r\n    exit: { opacity: 0 },\r\n  };\r\n}\r\n\r\n/**\r\n * Creates origin-aware scale variants for popovers/dropdowns\r\n * Scales from the origin point (where it appears from)\r\n */\r\nexport function createPopoverVariants(options?: {\r\n  initialScale?: number;\r\n  originX?: number;\r\n  originY?: number;\r\n}): Variants {\r\n  const { initialScale = 0.95, originX = 0.5, originY = 0 } = options ?? {};\r\n\r\n  return {\r\n    initial: {\r\n      opacity: 0,\r\n      scale: initialScale,\r\n      originX,\r\n      originY,\r\n    },\r\n    animate: {\r\n      opacity: 1,\r\n      scale: 1,\r\n    },\r\n    exit: {\r\n      opacity: 0,\r\n      scale: initialScale,\r\n    },\r\n  };\r\n}\r\n\r\n// =============================================================================\r\n// GESTURE PRESETS\r\n// Common gesture configurations\r\n// =============================================================================\r\n\r\nexport const gestures = {\r\n  /** Standard button tap feedback */\r\n  button: {\r\n    whileTap: { scale: 0.97 },\r\n    whileHover: { scale: 1.02 },\r\n  },\r\n\r\n  /** Subtle press for secondary actions */\r\n  subtle: {\r\n    whileTap: { scale: 0.99 },\r\n  },\r\n\r\n  /** Icon button feedback */\r\n  iconButton: {\r\n    whileTap: { scale: 0.9 },\r\n    whileHover: { scale: 1.1 },\r\n  },\r\n\r\n  /** Card hover effect */\r\n  card: {\r\n    whileHover: { scale: 1.02, y: -4 },\r\n    transition: springPresets.smooth,\r\n  },\r\n\r\n  /** List item hover */\r\n  listItem: {\r\n    whileHover: { x: 4 },\r\n    transition: springPresets.snappy,\r\n  },\r\n} as const;\r\n\r\n// =============================================================================\r\n// DRAG CONFIGURATION\r\n// For swipeable/draggable components\r\n// =============================================================================\r\n\r\nexport const dragConfig = {\r\n  /** Sheet swipe-to-dismiss threshold */\r\n  sheet: {\r\n    dismissThreshold: 100,\r\n    velocityThreshold: 500,\r\n  },\r\n\r\n  /** Drag constraints for bounded elements */\r\n  bounded: {\r\n    elastic: 0.1,\r\n    power: 0.8,\r\n  },\r\n} as const;\r\n\r\n// =============================================================================\r\n// EASING FUNCTIONS\r\n// Cubic-bezier curves for animations\r\n// =============================================================================\r\n\r\nexport const easings = {\r\n  /** Standard curve */\r\n  standard: [0.25, 0.1, 0.25, 1],\r\n  /** Ease-in */\r\n  easeIn: [0.42, 0, 1, 1],\r\n  /** Ease-out */\r\n  easeOut: [0, 0, 0.58, 1],\r\n  /** Emphasized */\r\n  emphasis: [0.33, 1, 0.68, 1],\r\n  /** Linear */\r\n  linear: [0, 0, 1, 1],\r\n} as const;\r\n\r\n// =============================================================================\r\n// DURATION PRESETS\r\n// Consistent timing values\r\n// =============================================================================\r\n\r\nexport const durations = {\r\n  instant: 0,\r\n  fast: 0.1,\r\n  normal: 0.2,\r\n  slow: 0.3,\r\n  slower: 0.5,\r\n  slowest: 0.8,\r\n} as const;\r\n\r\n// =============================================================================\r\n// UTILITY FUNCTIONS\r\n// =============================================================================\r\n\r\n/**\r\n * Combines multiple variant objects\r\n */\r\nexport function mergeVariants(...variants: Variants[]): Variants {\r\n  return variants.reduce((acc, variant) => ({ ...acc, ...variant }), {});\r\n}\r\n\r\n/**\r\n * Creates a transition that respects reduced motion\r\n */\r\nexport function getTransition(\r\n  transition: Transition,\r\n  prefersReducedMotion: boolean,\r\n): Transition {\r\n  if (prefersReducedMotion) {\r\n    return transitions.reduced;\r\n  }\r\n  return transition;\r\n}\r\n\r\n/**\r\n * Generates a layoutId for shared element transitions\r\n */\r\nexport function createLayoutId(prefix: string, id: string | number): string {\r\n  return `${prefix}-${id}`;\r\n}\r\n",
      "type": "registry:lib"
    }
  ]
}