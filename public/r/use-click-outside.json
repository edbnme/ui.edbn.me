{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "use-click-outside",
  "type": "registry:hook",
  "title": "useClickOutside",
  "description": "Hook to detect clicks outside a referenced element.",
  "dependencies": [],
  "registryDependencies": [],
  "files": [
    {
      "path": "hooks/use-click-outside.tsx",
      "content": "\"use client\";\n\nimport { RefObject, useEffect, useLayoutEffect, useRef } from \"react\";\n\n/**\n * Hook to detect clicks outside of a specified element\n *\n * Uses a ref to store the handler, preventing unnecessary event listener\n * re-attachment when the handler reference changes. This follows the\n * \"Store Event Handlers in Refs\" best practice pattern.\n *\n * @param ref - React ref object pointing to the element to detect clicks outside of\n * @param handler - Callback function to execute when a click outside is detected\n *\n * @example\n * ```tsx\n * const ref = useRef<HTMLDivElement>(null);\n * useClickOutside(ref, () => {\n *   console.log('Clicked outside!');\n * });\n * ```\n */\nfunction useClickOutside<T extends HTMLElement>(\n  ref: RefObject<T | null>,\n  handler: (event: MouseEvent | TouchEvent) => void,\n): void {\n  // Store handler in ref to prevent event listener re-attachment\n  const handlerRef = useRef(handler);\n\n  // Update ref on each render (useLayoutEffect ensures it's updated before events fire)\n  useLayoutEffect(() => {\n    handlerRef.current = handler;\n  });\n\n  useEffect(() => {\n    const handleClickOutside = (event: MouseEvent | TouchEvent) => {\n      if (!ref || !ref.current || ref.current.contains(event.target as Node)) {\n        return;\n      }\n\n      // Read from ref to always get the latest handler\n      handlerRef.current(event);\n    };\n\n    document.addEventListener(\"mousedown\", handleClickOutside);\n    document.addEventListener(\"touchstart\", handleClickOutside);\n\n    return () => {\n      document.removeEventListener(\"mousedown\", handleClickOutside);\n      document.removeEventListener(\"touchstart\", handleClickOutside);\n    };\n  }, [ref]); // handler removed from deps - now stable!\n}\n\nexport default useClickOutside;\nexport { useClickOutside };\n",
      "type": "registry:hook"
    }
  ]
}