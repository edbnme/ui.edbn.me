{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "use-merged-refs",
  "type": "registry:hook",
  "title": "useMergedRefs",
  "description": "Hook to merge multiple refs into a single callback ref.",
  "dependencies": [],
  "registryDependencies": [],
  "files": [
    {
      "path": "hooks/use-merged-refs.ts",
      "content": "\"use client\";\r\n\r\nimport {\r\n  useCallback,\r\n  type Ref,\r\n  type RefCallback,\r\n  type MutableRefObject,\r\n} from \"react\";\r\n\r\n/**\r\n * Type for any valid ref - can be a RefObject, RefCallback, or null\r\n */\r\ntype PossibleRef<T> = Ref<T> | undefined;\r\n\r\n/**\r\n * Assigns a value to a ref, handling both callback refs and RefObjects\r\n *\r\n * @param ref - The ref to assign to\r\n * @param value - The value to assign\r\n */\r\nfunction assignRef<T>(ref: PossibleRef<T>, value: T | null): void {\r\n  if (ref === null || ref === undefined) {\r\n    return;\r\n  }\r\n\r\n  if (typeof ref === \"function\") {\r\n    ref(value);\r\n  } else {\r\n    // It's a RefObject\r\n    (ref as MutableRefObject<T | null>).current = value;\r\n  }\r\n}\r\n\r\n/**\r\n * Merges multiple refs into a single callback ref\r\n *\r\n * This is useful when you need to pass multiple refs to a single element,\r\n * such as when combining a forwarded ref with an internal ref.\r\n *\r\n * @param refs - The refs to merge\r\n * @returns A callback ref that assigns to all provided refs\r\n *\r\n * @example\r\n * ```tsx\r\n * const MyComponent = forwardRef<HTMLDivElement, Props>((props, forwardedRef) => {\r\n *   const internalRef = useRef<HTMLDivElement>(null);\r\n *   const mergedRef = useMergedRefs(forwardedRef, internalRef);\r\n *\r\n *   return <div ref={mergedRef} />;\r\n * });\r\n * ```\r\n *\r\n * @example\r\n * ```tsx\r\n * // With multiple refs\r\n * const Component = forwardRef((props, ref) => {\r\n *   const localRef = useRef(null);\r\n *   const animationRef = useRef(null);\r\n *   const mergedRef = useMergedRefs(ref, localRef, animationRef);\r\n *\r\n *   return <div ref={mergedRef} />;\r\n * });\r\n * ```\r\n */\r\nexport function useMergedRefs<T>(...refs: PossibleRef<T>[]): RefCallback<T> {\r\n  return useCallback(\r\n    (node: T | null) => {\r\n      refs.forEach((ref) => {\r\n        assignRef(ref, node);\r\n      });\r\n    },\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    refs,\r\n  );\r\n}\r\n\r\n/**\r\n * Merges refs without hooks - for use outside of components\r\n *\r\n * @param refs - The refs to merge\r\n * @returns A callback ref that assigns to all provided refs\r\n *\r\n * @example\r\n * ```tsx\r\n * const callbackRef = mergeRefs(ref1, ref2, ref3);\r\n * ```\r\n */\r\nexport function mergeRefs<T>(...refs: PossibleRef<T>[]): RefCallback<T> {\r\n  return (node: T | null) => {\r\n    refs.forEach((ref) => {\r\n      assignRef(ref, node);\r\n    });\r\n  };\r\n}\r\n\r\nexport default useMergedRefs;\r\n",
      "type": "registry:hook"
    }
  ]
}